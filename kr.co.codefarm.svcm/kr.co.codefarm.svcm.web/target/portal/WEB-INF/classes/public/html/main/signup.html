<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<link rel="shortcut icon" href="/favicon.ico">
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1.0 ,maximum-scale=1.0, minimum-scale=1.0,user-scalable=no" />
<link rel="stylesheet" type="text/css" href="/assets/css/reset.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/jui/jui-ui.classic.css">
<link rel="stylesheet" type="text/css" href="/assets/css/iframe_layout.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/jquery-clockpicker.min.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/feather.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/xeicon.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/login.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/vue/v-calendar.min.css">
<link rel="stylesheet" type="text/css" href="/assets/css/vue/vue-toast-notification.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/tui/codemirror.css"></link>
<link rel="stylesheet" type="text/css" href="/assets/css/vue/axios.loading.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/vue/vue.transition.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/simplebar.css"/>

<script type="text/javascript" src="/assets/js/vendor/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/es6-promise.auto.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/lodash.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/moment.js"></script>
<script type="text/javascript" src="/assets/js/vendor/slick.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/simplebar.js"></script>
<script type="text/javascript" src="/assets/js/vendor/loadingoverlay.min.js"></script>

<!-- vue 관련 -->
<script type="text/javascript" src="/assets/js/vendor/vue/vue.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/es6-promise.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/es6-promise.auto.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/vue/axios.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/vue/vee-validate.js"></script>
<script type="text/javascript" src="/assets/js/vendor/vue/vue-validate-locale-ko.js"></script>
<script type="text/javascript" src="/assets/js/vendor/vue/Sortable.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/vue/v-calendar.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/vue/v-mask.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/vue/vue2-perfect-scrollbar.umd.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/vue/vue-grid-layout.umd.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/vue/vue-toast-notification.js"></script>
<script type="text/javascript" src="/assets/js/vendor/vue/vue-carousel.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/vue/vue-clipboard.min.js"></script>

<script type="text/javascript" src="/app-assets/js/api/systemmanager/userApi.api.js"></script>
<script type="text/javascript" src="/app-assets/js/api/systemmanager/defaultinfoApi.api.js"></script>
<!-- CF-COMPONENT -->
<script type="text/javascript" src="/assets/js/cf_component/Dataset.js"></script>
<script type="text/javascript" src="/assets/js/cf_component/PagingSet.js"></script>
<script type="text/javascript" src="/assets/js/cf_component/FileSet.js"></script>
<script type="text/javascript" src="/assets/js/cf_component/SingleFileSet.js"></script>
<script type="text/javascript" src="/assets/js/cf_component/ModalSet.js"></script>
<script type="text/javascript" src="/assets/js/cf_component/CommcodeSet.js"></script>
<script type="text/javascript" src="/assets/js/cf_component/CustomcodeSet.js"></script>

<!-- 프로젝트 공통 -->
<script type="text/javascript" src="/assets/js/cdf_library.js"></script>
<script type="text/javascript" src="/assets/js/common.js"></script>
<script type="text/javascript" src="/assets/js/axios.common.js"></script>
<script type="text/javascript" src="/assets/js/vendor/progresscircle.js"></script>

<!-- CF-COMPONENT(Template) -->
<script type="text/javascript" src="/assets/js/cf_component/template/PagingTemplate.js"></script>
<script type="text/javascript" src="/assets/js/cf_component/template/MessageModalTemplate.js"></script>
<script type="text/javascript" src="/assets/js/cf_component/template/InvalidTemplate.js"></script>
<script type="text/javascript" src="/assets/js/cf_component/template/DatePickerTemplate.js"></script>
<script type="text/javascript" src="/assets/js/cf_component/popup/systemmanager/user/corppopupTemplate.js"></script>

<!-- tui(toast) -->
<script type="text/javascript" src="/assets/js/vendor/tui/tui-code-snippet.js"></script>
<script type="text/javascript" src="/assets/js/vendor/tui/tui-chart-all.min.js"></script>
<script type="text/javascript" src="/assets/js/vendor/tui/tui-color-picker.js"></script>

<script type="text/javascript" src="/assets/js/vendor/cryptojs/hmac-sha256.js"></script>
<script type="text/javascript" src="/assets/js/vendor/cryptojs/enc-base64-min.js"></script>

<script type="text/javascript" src="/assets/js/vendor/rsa/jsbn.js"></script>
<script type="text/javascript" src="/assets/js/vendor/rsa/rsa.js"></script>
<script type="text/javascript" src="/assets/js/vendor/rsa/prng4.js"></script>
<script type="text/javascript" src="/assets/js/vendor/rsa/rng.js"></script>

<script type="text/javascript" src="/assets/js/vendor/inko.min.js"></script>
</head>

<body class="jui feather">
	<div id="signup" class="login_wrap signup" data-simplebar>
		<div class="signup-inner" id="signLoading">
			<div class="login-title-layout">
            	<a href="/info/index.html"><img class="login-logo"></a>
				<h3>회원정보입력</h3>
			</div>
			<div class="signup-terms-form" v-if="userJoin.currentRow">
				<div class="signup-layout">
					<h3>기관정보</h3>
					<div class="row">
						<div class="form-group col s12 m12 l6">
							<label for="bizNo" class="required">기관번호(사업자등록번호)</label>
							<input type="text" v-if="userJoin.currentRow" id="bizNo" name="bizNo" v-model="userJoin.currentRow.CORP_BIZ_NO" data-vv-as="기관번호(사업자등록번호)" v-validate="{required: true, regex: /^([0-9]{3})-([0-9]{2})-([0-9]{5})$/}" :class="{'invalid': errors.has('bizNo')}" placeholder="기관번호(사업자등록번호) (xxx-xx-xxxxx)" :disabled="signupGb == 'user'" maxlength="12">
							<invalid-message :visible="userJoin.currentRow" :name="'bizNo'" :verror="errors" />
						</div>
						<div class="form-group col s12 m12 l6">
							<label for="corpNm" class="required">기관명(기업명)</label>
							<input type="text" :class="{'form-corpnm' : signupGb == 'user','invalid': errors.has('corpNm')}" v-if="userJoin.currentRow" id="corpNm" name="corpNm" v-model="userJoin.currentRow.CORP_NM" data-vv-as="기관명(업체명)" v-validate="'required'" placeholder="기관명을 입력해주세요." :disabled="signupGb == 'user'" maxlength="200">
							<input v-if="signupGb == 'user'" type="button" class="btn type02 size-s input-btn" value="기관검색" @click="openPopupCorp">
							<invalid-message :visible="userJoin.currentRow" :name="'corpNm'" :verror="errors" />
						</div>
						<div class="form-group col s12 m12 l6">
							<label for="ceoNm" class="required">대표자명</label>
							<input v-if="userJoin.currentRow" type="text" id="ceoNm" name="ceoNm" v-model="userJoin.currentRow.CORP_CEO_NM" data-vv-as="대표자명" v-validate="'required'" :class="{'invalid': errors.has('ceoNm')}" placeholder="대표자명을 입력해주세요." :disabled="signupGb == 'user'" maxlength="100">
							<invalid-message :visible="userJoin.currentRow" :name="'ceoNm'" :verror="errors" />
						</div>
						<div class="form-group col s12 m12 l6">
							<label for="telNo" class="required">전화번호</label>
							<input v-if="userJoin.currentRow" type="text" id="telNo" name="telNo" v-model="userJoin.currentRow.CORP_TEL_NO" data-vv-as="전화번호" v-validate="'required'" :class="{'invalid': errors.has('telNo')}" placeholder="전화번호를 입력해주세요" :disabled="signupGb == 'user'" minlength="11" maxlength="13">
							<invalid-message :visible="userJoin.currentRow" :name="'telNo'" :verror="errors" />
						</div>
						<div class="form-group col s12 m12 l6">
							<label for="sector" class="required">업종</label>
							<input v-if="userJoin.currentRow" type="text" id="sector" name="sector" v-model="userJoin.currentRow.CORP_SECTORS" data-vv-as="업종" v-validate="'required'" :class="{'invalid': errors.has('sector')}" placeholder="대표자명을 입력해주세요." :disabled="signupGb == 'user'" maxlength="100">
							<invalid-message :visible="userJoin.currentRow" :name="'sector'" :verror="errors" />
						</div>
						<div class="form-group col s12 m12 l6">
							<label for="status" class="required">업태</label>
							<input v-if="userJoin.currentRow" type="text" id="status" name="status" v-model="userJoin.currentRow.CORP_STATUS" data-vv-as="업태" v-validate="'required'" :class="{'invalid': errors.has('status')}" placeholder="대표자명을 입력해주세요." :disabled="signupGb == 'user'" maxlength="100">
							<invalid-message :visible="userJoin.currentRow" :name="'status'" :verror="errors" />
						</div>
						<div class="form-group col s12 l12" v-if="signupGb == 'systemUser'">
							<label>첨부파일</label>
							<div class="input-file-box">
								<div class="file-input-div" style="cursor: pointer;">
									<a href="#!" class="btn type02 size-s" style="cursor: pointer;"><span style="cursor: pointer;">찾아보기</span></a>
									<input type="file" accept="image/*,.pdf" class="file-input-hidden" @change="fileCompChange($event.target)" title="파일명" style="cursor: pointer;">
								</div>
								<input id="fileName" class="size-m" readonly="readonly" v-model="fileName" title="파일명" placeholder="이미지 및 PDF파일만 허용">
							</div>
						</div>
					</div>
					<h3 v-if="signupGb == 'systemUser'">담당자 정보</h3>
					<h3 v-else>사용자 정보</h3>
					<div class="row">
						<div class="form-group  col s12 m12 l6">
							<label for="userId" class="required">이메일(로그인아이디 및 인증)</label>
							<input v-if="userJoin.currentRow" type="email" id="userId" name="userId" v-model="userJoin.currentRow.USER_ID" data-vv-as="이메일" v-on:keyup="idDoubleChk(userJoin.currentRow.USER_ID)" v-validate="'required|max:100'" :class="{'invalid': errors.has('userId')}" placeholder="로그인 아이디로 사용됩니다." maxlength="100">
							<small v-if="userJoin.currentRow.USER_ID!='' && !idDoubleCheck" class="form-txt invalid">이메일이 중복됩니다.</small>
							<invalid-message :visible="userJoin.currentRow" :name="'userId'" :verror="errors" />
						</div>
						<div class="form-group col s12 m12 l6">
							<label for="userNm" class="required">이름</label>
							<input v-if="userJoin.currentRow" type="text" id="userNm" name="userNm" v-validate="'required|max:100'" v-model="userJoin.currentRow.USER_NM" data-vv-as="이름" :class="{'invalid': errors.has('userNm')}" placeholder="이름을 입력해주세요" maxlength="100">
							<invalid-message :visible="userJoin.currentRow" :name="'userNm'" :verror="errors" />
						</div>
						<div class="form-group  col s12 m12 l6">
							<label for="userPwd" class="required">비밀번호</label>
							<input type="password" v-if="userJoin.currentRow" ref="userPwd" id="userPwd" name="userPwd" v-model="userJoin.currentRow.PWD_IN" data-vv-as="비밀번호" v-validate="{ required: true, regex: /^((?=.*[a-zA-Z0-9~!@#$%^&*()_+`\-=?]$)(?=.*[a-zA-Z])(?=.*[~!@#$%^&*()_+`\-=?])(?=.*[0-9])).{9,20}$/ }" :class="{'invalid': errors.has('userPwd') || (pwdCheck(userJoin.currentRow.PWD_IN,userJoin.currentRow.USER_ID,userJoin.currentRow.USER_NM) > 0 && userJoin.currentRow.PWD_IN.length > 0 && (userJoin.currentRow.USER_NM.length > 0 || userJoin.currentRow.USER_ID.length > 0))}" placeholder="영문, 숫자, 특수문자(!@#$%^&*()_+`-=?)를 포함한 9-20자" maxlength="20">
							<small class="form-txt invalid" v-show="pwdCheck(userJoin.currentRow.PWD_IN,userJoin.currentRow.USER_ID,userJoin.currentRow.USER_NM) > 0 && userJoin.currentRow.PWD_IN.length > 0">{{ pwdCheck(userJoin.currentRow.PWD_IN,userJoin.currentRow.USER_ID,userJoin.currentRow.USER_NM) | pwdFormatter }}</small>
							<invalid-message v-show="pwdCheck(userJoin.currentRow.PWD_IN,userJoin.currentRow.USER_ID,userJoin.currentRow.USER_NM) == 0" :visible="userJoin.currentRow" :name="'userPwd'" :verror="errors" />
						</div>
						<div class="form-group  col s12 m12 l6">
							<label for="newPwd2" class="required">비밀번호 확인</label>
							<input type="password" v-if="userJoin.currentRow" ref="newPwd2" id="newPwd2" name="newPwd2" v-model="newPwd2" data-vv-as="비밀번호 확인" v-validate="{ required: true, regex: /^((?=.*[a-zA-Z0-9~!@#$%^&*()_+`\-=?]$)(?=.*[a-zA-Z])(?=.*[~!@#$%^&*()_+`\-=?])(?=.*[0-9])).{9,20}$/, confirmed: userJoin.currentRow.PWD_IN }" :class="{'invalid': errors.has('newPwd2') || (pwdCheck(newPwd2,userJoin.currentRow.USER_ID,userJoin.currentRow.USER_NM) > 0 && newPwd2.length > 0 && (userJoin.currentRow.USER_NM.length > 0 || userJoin.currentRow.USER_ID.length > 0))}" placeholder="영문, 숫자, 특수문자(!@#$%^&*()_+`-=?)를 포함한 9-20자" maxlength="20">
							<small class="form-txt invalid" v-show="pwdCheck(newPwd2,userJoin.currentRow.USER_ID,userJoin.currentRow.USER_NM) > 0 && newPwd2.length > 0 && (userJoin.currentRow.USER_NM.length > 0 || userJoin.currentRow.USER_ID.length > 0)">{{ pwdCheck(newPwd2,userJoin.currentRow.USER_ID,userJoin.currentRow.USER_NM) | pwdFormatter }}</small>
							<invalid-message v-show="pwdCheck(newPwd2,userJoin.currentRow.USER_ID,userJoin.currentRow.USER_NM) == 0" :visible="userJoin.currentRow" :name="'newPwd2'" :verror="errors" />
						</div>
						<div class="form-group col s12 m12 l6">
							<label for="userTelNo" class="required">전화번호</label>
							<input v-if="userJoin.currentRow" type="text" id="userTelNo" name="userTelNo" v-model="userJoin.currentRow.TEL_NO" data-vv-as="전화번호" v-validate="'required|max:13'" :class="{'invalid': errors.has('userTelNo')}" placeholder="전화번호를 입력해주세요" minlength="11" maxlength="13">
							<invalid-message :visible="userJoin.currentRow" :name="'userTelNo'" :verror="errors" />
						</div>
						<div class="form-group col s12 m12 l6">
							<label for="userMtelNo" class="required">휴대 전화번호</label>
							<input v-if="userJoin.currentRow" type="text" id="userMtelNo" name="userMtelNo" v-model="userJoin.currentRow.HP_NO" data-vv-as="휴대 전화번호" v-validate="'required|max:13'" :class="{'invalid': errors.has('userMtelNo')}" placeholder="휴대 전화번호를 입력해주세요" minlength="13" maxlength="13">
							<invalid-message :visible="userJoin.currentRow" :name="'userMtelNo'" :verror="errors" />
						</div>
						<div class="form-group col s12 m12 l6">
							<label for="userDeptNm">부서</label>
							<input v-if="userJoin.currentRow" type="text" id="userDeptNm" name="userDeptNm" v-model="userJoin.currentRow.DEPT_NM" data-vv-as="부서명" placeholder="부서명을 입력해주세요" maxlength="50">
						</div>
						<div class="form-group col s12 m12 l6">
							<label for="userPstnNm">직책</label>
							<input v-if="userJoin.currentRow" type="text" id="userPstnNm" name="userPstnNm" v-model="userJoin.currentRow.PSTN_NM" data-vv-as="직책명" placeholder="직책을 입력해주세요" maxlength="100">
						</div>
						<div class="btn-layout">
							<button class="btn-text btn-cancel" @click="login">가입 취소</button>
							<button type="submit" class="btn size-l btn-signup" value="회원가입" @click="validateObj">회원가입</button>
						</div>
					</div>
				</div>
			</div>
			
			<modal-message :modalset="messageModal" v-on:messagepoppupcallback="messagepoppupcallback"></modal-message>
			<popup-corp ref="popupCorp" @callback="popupCorpCallback"></popup-corp>

		</div>

		<footer class="copyright">
			<div>Copyright(C) IDEA IT. Co.,Ltd. All Rights Reserved.</div>
		</footer>
	</div>
</body>

<script type="text/javascript">
/*******************************************************************************************************************************************************************
 * vue start 
 ********************************************************************************************************************************************************************/
Vue.use(VeeValidate,{locale: 'ko'});
Vue.use(VueToast);
var vm = new Vue({
	el: '#signup',
	//사용할 데이터
	data: {
		uploadFile : '',
		defaultinfo :  new Dataset(), //이용약관
		userJoin : new Dataset(), //회원가입 폼
		userGbDataSet : new Dataset(), // 사용자 구분 
		//전국 초중고 returnMessage
		signupGb: getParameterByName('signupGb'),
		fileSet: new SingleFileSet('SMN'),
		ext: '',
		returnMessage: '',
		fileName: '',
		newPwd1: '',
		newPwd2: '',
		regPasswordChk : true,
		showView : 'detail', //(terms : 이용약관, detail : 회원가입)
		idDoubleCheck : true, //아이디 중복체크 여부
		idDoubleCheckDataset : new Dataset(),
		messageModal : new ModalSet('modal-message'),
		strDate : '',
	 	signLoading: {id:'signLoading', val:false},
	},
	/* 생성 될 때 */ 
	beforeCreate: function(){
	},
	/* 계산된 속성 표현 시 */
	computed: {
		
	},
	/* 데이터 감시 */
	watch: {
		'signupGb':{
			handler: function(val, oldVal){
				alert('비정상적인 접근입니다.');
				window.location.href = window.location.origin;
			}
		},
	    'userJoin.currentRow.USER_ID' : {
	        handler : function(val , oldVal){
	            if(val != oldVal){
	                this.idDoubleChk(val);
	            }
	        }
	    },
		'userJoin.currentRow.CORP_BIZ_NO':{
			handler: function(val, oldVal){
				this.userJoin.currentRow.CORP_BIZ_NO = this.userJoin.currentRow.CORP_BIZ_NO.replace(/[^0-9]/g,'').replaceAll('-','').replace(/([0-9]{3})([0-9]{2})([0-9]{5})$/, '$1-$2-$3');
			}
		},
		'userJoin.currentRow.CORP_TEL_NO':{
			handler: function(val, oldVal){
				this.userJoin.currentRow.CORP_TEL_NO = this.userJoin.currentRow.CORP_TEL_NO.replace(/[^0-9]/g,'').replaceAll('-','').replace(/([0-9]{2,3})([0-9]{3,4})([0-9]{4})$/, '$1-$2-$3');
			}
		},
		'userJoin.currentRow.TEL_NO':{
			handler: function(val, oldVal){
				this.userJoin.currentRow.TEL_NO = this.userJoin.currentRow.TEL_NO.replace(/[^0-9]/g,'').replaceAll('-','').replace(/([0-9]{2,3})([0-9]{3,4})([0-9]{4})$/, '$1-$2-$3');
			}
		},
		'userJoin.currentRow.HP_NO':{
			handler: function(val, oldVal){
				this.userJoin.currentRow.HP_NO = this.userJoin.currentRow.HP_NO.replace(/[^0-9]/g,'').replaceAll('-','').replace(/([0-9]{2,3})([0-9]{3,4})([0-9]{4})$/, '$1-$2-$3');
			}
		},
	    'signLoading.val': {
	    	handler: function (val, oldVal) {
				this.LoadingOverlay($('#'+this.signLoading.id), val);
			}
	    }
		
	},
	filters:{
		pwdFormatter: function(val){
			var txt = '';
			switch(val){
				case 1: txt = '연속된 3자리 이상 키보드상 나란히 있는 문자열은 사용불가능합니다.'; break;
				case 2: txt = '3자리 이상 동일한 문자반복은 사용불가능합니다.'; break;
				case 3: txt = '3자리 이상 연속된숫자(역순)또는 알파벳(역순)은 사용불가능합니다.'; break;
				case 4: txt = '3자리 이상 연속된숫자또는 알파벳은 사용불가능합니다.'; break;
				case 5: txt = '아이디 또는 이름이 포함된 문자열은 사용불가능합니다.'; break;
			}
			return txt;
		}
	},
	/* 마운트 된 시점수행 */
	mounted: function(){
		//사용자 회원가입 addRow
		if(this.signupGb != 'user' && this.signupGb != 'systemUser'){
			alert('비정상적인 접근입니다.');
			window.location.href = window.location.origin;
		}
		this.addUserJoin();
	},
	/* 함수 */
	methods: {
		openPopupCorp: function(){
    		this.$refs.popupCorp.showCorpPopup();
    	},
    	popupCorpCallback : function(message){
			this.returnMessage = message;
			this.userJoin.currentRow.CORP_ID = this.returnMessage.CORP_ID;
			this.userJoin.currentRow.CORP_BIZ_NO  = this.returnMessage.CORP_BIZ_NO.replaceAll('-','').replace(/([0-9]{3})([0-9]{2})([0-9]{5})$/, '$1-$2-$3');
			this.userJoin.currentRow.CORP_NM = this.returnMessage.CORP_NM;
			this.userJoin.currentRow.CORP_CEO_NM  = this.returnMessage.CORP_CEO_NM;
			this.userJoin.currentRow.CORP_TEL_NO  = this.returnMessage.CORP_TEL_NO.replaceAll('-','').replace(/([0-9]{2,3})([0-9]{3,4})([0-9]{4})$/, '$1-$2-$3');
			this.userJoin.currentRow.CORP_SECTORS = this.returnMessage.CORP_SECTORS;
			this.userJoin.currentRow.CORP_STATUS = this.returnMessage.CORP_STATUS;
    	},
    	pwdCheck: function(pwd, id, name){
    		var checkArr1 = new Array(8);
    		var checkArr2 = new Array(8);
    		checkArr1[0] ="~!@#$%^&*()_+";
    		checkArr1[1] ="`1234567890-=";
    		checkArr1[2] ="QWERTYUIOP{}|";
    		checkArr1[3] ="ASDFGHJKL:\"";
    		checkArr1[4] ="ZXCVBNM<>?";
    		checkArr1[5] ="qwertyuiop[]\\";
    		checkArr1[6] ="asdfghjkl;'";
    		checkArr1[7] ="zxcvbnm,./";
    		
    		checkArr2[0] = checkArr1[0].split('').reverse().join('');
    		checkArr2[1] = checkArr1[1].split('').reverse().join('');
    		checkArr2[2] = checkArr1[2].split('').reverse().join('');
    		checkArr2[3] = checkArr1[3].split('').reverse().join('');
    		checkArr2[4] = checkArr1[4].split('').reverse().join('');
    		checkArr2[5] = checkArr1[5].split('').reverse().join('');
    		checkArr2[6] = checkArr1[6].split('').reverse().join('');
    		checkArr2[7] = checkArr1[7].split('').reverse().join('');
    		
    		for (var i = 0 ; i < pwd.length - 2 ; i++ ){ 
	    		var item = pwd.charAt(i) + pwd.charAt(i+1) + pwd.charAt(i+2);
	    		for (var j = 0 ; j < checkArr1.length ; j++){
		    		if ( checkArr1[j].indexOf(item) != -1  || checkArr2[j].indexOf(item) != -1){
		    			return 1;
		    		}
	    		}
	    		if((pwd.charCodeAt(i) >= 48 && pwd.charCodeAt(i) <= 57) || (pwd.charCodeAt(i) >= 65 && pwd.charCodeAt(i) <= 90) || (pwd.charCodeAt(i) >= 97 && pwd.charCodeAt(i) <= 122)){
		    		if(pwd.charAt(i) == pwd.charAt(i+1) && pwd.charAt(i+1) == pwd.charAt(i+2)) {
		    			return 2;
	   			    }
	    		  	if(pwd.charCodeAt(i) - pwd.charCodeAt(i+1) == 1 && pwd.charCodeAt(i+1) - pwd.charCodeAt(i+2) == 1) {
		    			return 3;
	    			}
	    			if(pwd.charCodeAt(i) - pwd.charCodeAt(i+1) == -1 && pwd.charCodeAt(i+1) - pwd.charCodeAt(i+2) == -1) {
		    			return 4;
	    			}
	    		}
    		}
    		if(id.split("@")[0].length > 0){
	    		if(pwd.indexOf(id.split("@")[0]) != -1){
	    			return 5;
	    		}
    		}
    		if(inko.ko2en(name).length > 0){
	    		if(pwd.indexOf(inko.ko2en(name)) != -1){
	    			return 5;
	    		}
    		}
    		return 0;
    	},
		//회원가입 폼
		addUserJoin : function(){
			var addObj = {
					CORP_ID : '',
					CORP_NM : '',
					CORP_CEO_NM : '',
					CORP_TEL_NO : '',
					CORP_SECTORS : '',
					CORP_STATUS : '',
					CORP_BIZ_NO : '',
					USER_ID : '',
					USER_NM : '',
					DEPT_CD : '',
					DEPT_NM : '',
					TEL_NO : '',
					HP_NO : '',
					PWD : '',
					PWD_IN : '',
					YAKGWAN1_AGREE_YN : getParameterByName('a1'),
					YAKGWAN2_AGREE_YN : getParameterByName('a2'),
					YAKGWAN3_AGREE_YN : getParameterByName('a3'),
					YAKGWAN4_AGREE_YN : getParameterByName('a4')
			}
			
			var addRow  = this.userJoin.addRow(addObj);
		},
		//아이디 중복체크
		idDoubleChk : function(id){
			
			var returnVal = null;
			returnVal = userApiApi.getUserIdDoubleChk(id);
			var self = this;
			returnVal.then(function(response){
				if(response.data.length > 0){
					self.idDoubleCheck = false;
					return false;
				}else{
					self.idDoubleCheck = true;
					return true;
				}
			});
		},
		fileCompChange : function(pTarget) {
			if(pTarget.files[0]){
				if (!pTarget.files[0].type.includes('image') && !pTarget.files[0].type.includes('pdf')) {
	            	alert('허용되지않은 파일형식입니다.\n이미지파일 또는 pdf파일만 업로드가가능합니다.')
				}else{
					this.uploadFile = pTarget;
					this.fileName = this.uploadFile.value.replace('C:\\fakepath\\','');
					var getExt = this.fileName.split('.');
					this.ext = getExt[getExt.length-1];
				}
			}else{
				this.uploadFile = '';
				this.fileName = '';
				this.ext = '';
			}
		},
		validateObj : function(){
   			var validate = this.$validator.validateAll();
   			var self = this;
   			validate.then(function(response) {
   				var checkPwd = self.pwdCheck(self.userJoin.currentRow.PWD_IN,self.userJoin.currentRow.USER_ID,self.userJoin.currentRow.USER_NM);
   				if(!response){
					alert('필수입력항목을 확인해주세요.');
   				}else if(!self.idDoubleCheck){
					alert('아이디 중복을 확인해주세요.');
					$('#userId').focus();
				}else if(checkPwd > 0){
					switch(checkPwd){
					case 1: alert('연속된 3자리 이상 키보드상 나란히 있는 문자열은 사용불가능합니다.'); break;
					case 2: alert('3자리 이상 동일한 문자반복은 사용불가능합니다.'); break;
					case 3: alert('3자리 이상 연속된숫자(역순)또는 알파벳(역순)은 사용불가능합니다.'); break;
					case 4: alert('3자리 이상 연속된숫자또는 알파벳은 사용불가능합니다.'); break;
					case 5: alert('아이디 또는 이름이 포함된 문자열은 사용불가능합니다.'); break;
					}
					$('#userPw').focus();
				}else if(!(self.userJoin.currentRow.CORP_TEL_NO.startsWith('0') && !self.userJoin.currentRow.CORP_TEL_NO.startsWith('1',1) && !self.userJoin.currentRow.CORP_TEL_NO.startsWith('9',1))){
					alert('전화번호로 사용가능한 번호는 지역번호 또는 인터넷전화번호만 입력이 가능합니다.');
					$('#telNo').focus();
				}else if(!(self.userJoin.currentRow.TEL_NO.startsWith('0') && !self.userJoin.currentRow.TEL_NO.startsWith('1',1) && !self.userJoin.currentRow.TEL_NO.startsWith('9',1))){
					alert('전화번호로 사용가능한 번호는 지역번호 또는 인터넷전화번호만 입력이 가능합니다.');
					$('#userTelNo').focus();
				}else if(!self.userJoin.currentRow.HP_NO.startsWith('010')){
					alert('010으로 시작하는 휴대전화번호만 입력이 가능합니다.');
					$('#userMtelNo').focus();
				}else{
   					self.messageModal.openModal('confirm', '회원가입신청', '회원가입신청을 진행하시겠습니까?', 'small', 'insertUser', '');
				}
			});
		},
	   	confirmOpen : function(id, data){
	   		if(id == 'insertUser'){
	   			var validate = this.$validator.validateAll();
	   			var self = this;
	   			validate.then(function(response) {
	   				var checkPwd = self.pwdCheck(self.userJoin.currentRow.PWD_IN,self.userJoin.currentRow.USER_ID,self.userJoin.currentRow.USER_NM);
	   				if(!response){
						alert('필수입력항목을 확인해주세요.');
	   				}else if(!self.idDoubleCheck){
						alert('아이디 중복을 확인해주세요.');
						$('#userId').focus();
					}else if(checkPwd > 0){
						switch(checkPwd){
						case 1: alert('연속된 3자리 이상 키보드상 나란히 있는 문자열은 사용불가능합니다.'); break;
						case 2: alert('3자리 이상 동일한 문자반복은 사용불가능합니다.'); break;
						case 3: alert('3자리 이상 연속된숫자(역순)또는 알파벳(역순)은 사용불가능합니다.'); break;
						case 4: alert('3자리 이상 연속된숫자또는 알파벳은 사용불가능합니다.'); break;
						case 5: alert('아이디 또는 이름이 포함된 문자열은 사용불가능합니다.'); break;
						}
						$('#userPw').focus();
					}else if(!(self.userJoin.currentRow.CORP_TEL_NO.startsWith('0') && !self.userJoin.currentRow.CORP_TEL_NO.startsWith('1',1) && !self.userJoin.currentRow.CORP_TEL_NO.startsWith('9',1))){
						alert('전화번호로 사용가능한 번호는 지역번호 또는 인터넷전화번호만 입력이 가능합니다.');
						$('#telNo').focus();
					}else if(!(self.userJoin.currentRow.TEL_NO.startsWith('0') && !self.userJoin.currentRow.TEL_NO.startsWith('1',1) && !self.userJoin.currentRow.TEL_NO.startsWith('9',1))){
						alert('전화번호로 사용가능한 번호는 지역번호 또는 인터넷전화번호만 입력이 가능합니다.');
						$('#userTelNo').focus();
					}else if(!self.userJoin.currentRow.HP_NO.startsWith('010')){
						alert('010으로 시작하는 휴대전화번호만 입력이 가능합니다.');
						$('#userMtelNo').focus();
					}else{
						self.signLoading.val = true;

	   					$.ajax({
	   						url: '/publickeys',
	   						cache: false,
	   						success: function(data) {
	   							var rsa = new RSAKey();
	   							rsa.setPublic(data.modulus, data.publicExponent);
// 		 	   					self.userJoin.currentRow.PWD = rsa.encrypt(sha256Enc(self.userJoin.currentRow.PWD_IN));
		 	   					self.userJoin.currentRow.PWD = rsa.encrypt(self.userJoin.currentRow.PWD_IN);
		 	   					var params = {
		 	   						CORP_ID				: self.userJoin.currentRow.CORP_ID,
		 	   						CORP_BIZ_NO			: self.userJoin.currentRow.CORP_BIZ_NO,
			 	   					CORP_NM				: self.userJoin.currentRow.CORP_NM,
			 	   					CORP_CEO_NM			: self.userJoin.currentRow.CORP_CEO_NM,
			 	   					CORP_TEL_NO			: self.userJoin.currentRow.CORP_TEL_NO,
			 	   					CORP_SECTORS		: self.userJoin.currentRow.CORP_SECTORS,
			 	   					CORP_STATUS			: self.userJoin.currentRow.CORP_STATUS,
			 	   					USER_ID				: self.userJoin.currentRow.USER_ID,
			 	   					USER_NM				: self.userJoin.currentRow.USER_NM,
			 	   					TEL_NO				: self.userJoin.currentRow.TEL_NO,
			 	   					HP_NO				: self.userJoin.currentRow.HP_NO,
			 	   					DEPT_NM				: self.userJoin.currentRow.DEPT_NM,
			 	   					PSTN_NM				: self.userJoin.currentRow.PSTN_NM,
			 	   					PWD					: self.userJoin.currentRow.PWD,
			 						YAKGWAN1_AGREE_YN 	: self.userJoin.currentRow.YAKGWAN1_AGREE_YN, 
			 						YAKGWAN2_AGREE_YN 	: self.userJoin.currentRow.YAKGWAN2_AGREE_YN, 
			 						YAKGWAN3_AGREE_YN 	: self.userJoin.currentRow.YAKGWAN3_AGREE_YN, 
			 						YAKGWAN4_AGREE_YN 	: self.userJoin.currentRow.YAKGWAN4_AGREE_YN 
		 	   					}
								if(self.signupGb == 'user'){
				   					var returnVal = userApiApi.userInsert(params);
				   		   			returnVal.then(function(response) {
				   		   				var data = response.data;
			
				   		   				if(response.status >= 200 && response.status < 300){
				   		   					alert('회원가입신청에 성공하셨습니다.\n가입신청한 이메일에서 본인인증을 진행해주세요.');
				   		   					//로그인창으로 이동
				   		   					var appUrl = window.location.protocol + "//" + window.location.host+"/"+"html/main/login.html";
				   		   					window.location.href = appUrl;
				   		   				}else{
			   								alert('유효하지않은 메일주소이거나 비정상적인 접근입니다.');
			   								window.location.reload();
				   		   				}
				   		   			}).finally(function(){
				   		   				self.signLoading.val = false;
				   					});
								}
								else{
				   					var returnVal = userApiApi.systemUserInsert(params);
				   		   			returnVal.then(function(response) {
				   		   				var data = response.data;
				   		   				if(response.data['MSG'] == 'DUP'){
				   		   					alert('이미등록된 기관입니다. 일반 사용자 가입을 통해 가입신청해주세요.');
				   		   				}
				   		   				else if(response.status >= 200 && response.status < 300){
				   		   					if(self.uploadFile){
						   		   				self.fileSet = new SingleFileSet('SMN',true, self.userJoin.currentRow.CORP_NM + '.' + self.ext + '',true);
				   								self.fileSet.handleFileUpload(self.uploadFile,'CORP_ID',data.CORP_ID,'file');
				   								self.fileSet.uploadFile('CORP_ID',data.CORP_ID,'file',true).finally(function(){
					   								alert('회원가입신청에 성공하셨습니다.\n가입신청한 이메일에서 본인인증을 진행해주세요.');
						   		   					//로그인창으로 이동
						   		   					var appUrl = window.location.protocol + "//" + window.location.host+"/"+"html/main/login.html"
						   		   					window.location.href = appUrl;
				   								});
				   		   					}else{
				   								alert('회원가입신청에 성공하셨습니다.\n가입신청한 이메일에서 본인인증을 진행해주세요.');
					   		   					//로그인창으로 이동
					   		   					var appUrl = window.location.protocol + "//" + window.location.host+"/"+"html/main/login.html"
					   		   					window.location.href = appUrl;
				   		   					}
				   		   				}else{
			   								alert('유효하지않은 메일주소이거나 비정상적인 접근입니다.');
			   								window.location.reload();
				   		   				}
				   		   			}).finally(function(){
				   		   				self.signLoading.val = false;
				   					});
								}
	   						}
	   					});
					}
	   			});
	   				
			}
	   	},
	   	messagepoppupcallback : function(gb, currentId, customData){
	   		if(gb == 'confirm' && currentId == 'insertUser') {
	   			this.confirmOpen(currentId);
	   		}
	   	},
	   	login : function(){
	   		var appUrl = window.location.protocol + "//" + window.location.host+"/"+"html/main/login.html"
			window.location.href = appUrl;
	   	}
	}
});
/*******************************************************************************************************************************************************************
 * vue end 
 ********************************************************************************************************************************************************************/
 
 /*******************************************************************************************************************************************************************
  * javascript start 
  ********************************************************************************************************************************************************************/ 
 $(document).ready(function(){
	$.ajax({
		url: '/system-manager/default-info/representative',
		success: function(data) {
			if(data.BG)
            	$('#signup').css('background', 'url("/upload'+data.BG.replaceAll('\\','/')+'"), url("/images/login/login_bg.png") no-repeat')
            else
            	$('#signup').css('background', 'rgb(186, 190, 223)')
            	
            $('#signup').css('background-size', 'cover')
            if(data.LOGO)
				$('#logo').attr('src','/upload'+data.LOGO);
            else
				$('#logo').attr('src','/images/login/logo.svg');
			$('#logo').attr('alt',data.SITE_NM);
			document.title = data.SITE_NM;
		}
	});	
});

function notifySubmit(color, title, message, icon, duration){
	//color: success, info, warning, danger
	//type: success, error, warning, info, default
	var type = 'default';
	var durationVal = 3000;
	
	if(!isNull(duration)) durationVal = duration;
	
	if(color == 'success') type = 'success';
	else if(color == 'info') type = 'info';
	else if(color == 'warning') type = 'warning';
	else if(color == 'danger' || color == 'error') type = 'error';
	
	Vue.$toast.open({
	    message: message,
	    type: type,
	    position: 'bottom-right',
	    duration: durationVal,
	    // all other options
	});
}

function getParameterByName(name) {
	var url = window.location.href;
	name = name.replace(/[\[\]]/g, "\\$&");
	var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
	results = regex.exec(url);

	if (results == null || results.length != 3) {
		return '';
	} else {
		return results[2];
	}
}

function sha256Enc(pwd) {
	var hash = CryptoJS.SHA256(pwd);
	var hashInBase64 = CryptoJS.enc.Base64.stringify(hash);
	
	return hashInBase64;
}
/*******************************************************************************************************************************************************************
 * javascript end 
 ********************************************************************************************************************************************************************/
</script>
</html>